# Test values for OpenNebula Helm Chart
# Full deployment with OneDeploy provisioner
# SSH keys are AUTO-GENERATED - no manual configuration needed!

image:
  repository: pablodelarco/opennebula
  tag: "test"
  pullPolicy: Always

opennebula:
  adminPassword: "opennebula"

# SSH keys will be auto-generated by pre-install hook
# ssh:
#   autoGenerate: true  # This is the default

onedeploy:
  enabled: true

  # Bootstrap: provide your SSH key to inject the auto-generated key into hypervisors
  # Use: --set-file onedeploy.bootstrap.privateKey=~/.ssh/id_rsa
  bootstrap: {}

  vars:
    ansible_user: root
    one_version: "7.0"
    ensure_hosts: true

    # Virtual Network configuration
    vn:
      default:
        managed: true
        template:
          VN_MAD: bridge
          PHYDEV: enp1s0
          BRIDGE: br0
          AR:
            TYPE: IP4
            IP: 192.168.1.200
            SIZE: 50
          NETWORK_ADDRESS: 192.168.1.0
          NETWORK_MASK: 255.255.255.0
          GATEWAY: 192.168.1.1
          DNS: 8.8.8.8

    # Datastore configuration (SSH mode - local storage)
    ds:
      mode: ssh

  # Hypervisor node
  node:
    hosts:
      worker:
        ansible_host: 192.168.1.57

  provisioner:
    image:
      repository: pablodelarco/opennebula-provisioner
      tag: "test"
      pullPolicy: Always
    # No SSH keys needed - they are auto-generated!
